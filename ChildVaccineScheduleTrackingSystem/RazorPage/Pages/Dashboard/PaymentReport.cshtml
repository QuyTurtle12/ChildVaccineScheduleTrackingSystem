@page
@model RazorPage.Pages.Dashboard.PaymentReportModel
@{
    ViewData["Title"] = "Payment Reports";
}

<h1>Payment Reports</h1>

<div>
    <h2>Payment Count by Method</h2>
    <canvas id="paymentCountChart" width="800" height="400"></canvas>
</div>

<div class="mt-5">
    <h2>Payment Amount by Method</h2>
    <canvas id="paymentAmountChart" width="800" height="400"></canvas>
</div>

@section Scripts {
    <!-- Include Chart.js from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Payment Count by Method Chart Data
        var paymentCountData = @Html.Raw(Model.PaymentCountByMethodJson);
        var countLabels = paymentCountData.map(item => item.PaymentMethod);
        var countData = paymentCountData.map(item => item.Count);

        var ctxCount = document.getElementById('paymentCountChart').getContext('2d');
        var paymentCountChart = new Chart(ctxCount, {
            type: 'bar',
            data: {
                labels: countLabels,
                datasets: [{
                    label: 'Payment Count',
                    data: countData,
                    backgroundColor: 'rgba(153, 102, 255, 0.6)',
                    borderColor: 'rgba(153, 102, 255, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Payment Method'
                        }
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Count'
                        }
                    }
                }
            }
        });

        // Payment Amount by Method Chart Data
        var paymentAmountData = @Html.Raw(Model.PaymentAmountByMethodJson);
        var amountLabels = paymentAmountData.map(item => item.PaymentMethod);
        var amountData = paymentAmountData.map(item => item.TotalAmount);

        var ctxAmount = document.getElementById('paymentAmountChart').getContext('2d');
        var paymentAmountChart = new Chart(ctxAmount, {
            type: 'bar',
            data: {
                labels: amountLabels,
                datasets: [{
                    label: 'Total Payment Amount',
                    data: amountData,
                    backgroundColor: 'rgba(255, 159, 64, 0.6)',
                    borderColor: 'rgba(255, 159, 64, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Payment Method'
                        }
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Total Amount'
                        }
                    }
                }
            }
        });
    </script>
}
